–í FastAPI –∫–∞–∫ —Ç–∞–∫–æ–≤–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ AbstractUser –∏–∑ Django –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ FastAPI ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Django, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é ORM, —Å–∏—Å—Ç–µ–º—É –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –≤—Å—ë –ø—Ä–æ—á–µ–µ.

–ù–æ —Ç—ã –º–æ–∂–µ—à—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –Ω—É–ª—è –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

üß† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç AbstractUser –≤ Django?
AbstractUser ‚Äî —ç—Ç–æ –Ω–∞—Å–ª–µ–¥—É–µ–º–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤ –∫–æ—Ç–æ—Ä—É—é —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã:

–ø–æ–ª—è username, email, password, is_active, is_staff –∏ —Ç.–¥.

–ª–æ–≥–∏–∫–∞ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è

–º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (UserManager)

–º–µ—Ç–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

‚úÖ –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥ –≤ FastAPI?
1. –° –ø–æ–º–æ—â—å—é SQLAlchemy (–∏–ª–∏ SQLModel)
–°–æ–∑–¥–∞—ë—à—å —Å–≤–æ—é –±–∞–∑–æ–≤—É—é –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –∞–Ω–∞–ª–æ–≥ AbstractUser:

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
from sqlalchemy import Boolean, Column, Integer, String
from sqlalchemy.orm import declarative_base

Base = declarative_base()

class BaseUser(Base):
    __abstract__ = True  # –≠—Ç–æ –≤–∞–∂–Ω–æ! –≠—Ç–∞ –º–æ–¥–µ–ª—å –Ω–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

    id = Column(Integer, primary_key=True, index=True)
    username = Column(String, unique=True, index=True, nullable=False)
    email = Column(String, unique=True, index=True, nullable=False)
    hashed_password = Column(String, nullable=False)
    is_active = Column(Boolean, default=True)
    is_superuser = Column(Boolean, default=False)
–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å, –Ω–∞—Å–ª–µ–¥—É—è—Å—å –æ—Ç BaseUser:

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
class User(BaseUser):
    __tablename__ = "users"
    # –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
–≠—Ç–æ –∏ –µ—Å—Ç—å –∞–Ω–∞–ª–æ–≥ AbstractUser –≤ –¥—É—Ö–µ SQLAlchemy –∏ FastAPI.

2. –° –ø–æ–º–æ—â—å—é Pydantic –º–æ–¥–µ–ª–µ–π (schemas)
–í FastAPI —Ç—ã –±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pydantic-—Å—Ö–µ–º—ã –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ):

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
from pydantic import BaseModel, EmailStr

class UserBase(BaseModel):
    username: str
    email: EmailStr

class UserCreate(UserBase):
    password: str

class UserRead(UserBase):
    id: int
    is_active: bool
    is_superuser: bool

    class Config:
        orm_mode = True
3. –ì–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –≤—Å—ë —Ä–∞–±–æ—Ç–∞–ª–æ "–∫–∞–∫ –≤ Django", –æ–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

‚úÖ FastAPI Users
–û—á–µ–Ω—å –º–æ—â–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è –≥–æ—Ç–æ–≤—É—é –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, JWT, OAuth –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

–ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
pip install fastapi-users[sqlalchemy]
–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
from fastapi_users.db import SQLAlchemyBaseUserTable
from sqlalchemy.orm import DeclarativeBase

class Base(DeclarativeBase):
    pass

class User(SQLAlchemyBaseUserTable[int], Base):
    __tablename__ = "user"
    # —Å–≤–æ–∏ –ø–æ–ª—è –º–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
SQLAlchemyBaseUserTable ‚Äî —ç—Ç–æ –∏ –µ—Å—Ç—å –∞–Ω–∞–ª–æ–≥ AbstractUser.

üîö –ü–æ–¥—ã—Ç–æ–∂–∏–º
| –ü–æ–¥—Ö–æ–¥                  | –ê–Ω–∞–ª–æ–≥ Django           | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                        |
| ----------------------- | ----------------------- | ---------------------------------- |
| –°–≤–æ—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –º–æ–¥–µ–ª—å | ‚úÖ `AbstractUser`        | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å SQLAlchemy          |
| FastAPI Users           | ‚úÖ `AbstractUser` + auth | –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–æ–≥ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π       |
| Pydantic –º–æ–¥–µ–ª–∏         | ‚ùå (—Ç–æ–ª—å–∫–æ —Å—Ö–µ–º—ã)        | –î–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –ª–æ–≥–∏–∫—É |


–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –º–æ–∂–µ—à—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å BaseUser —Å–∞–º.
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π, –ª–æ–≥–∏–Ω–æ–º, —Ç–æ–∫–µ–Ω–∞–º–∏ ‚Äî –ª—É—á—à–µ –≤–∑—è—Ç—å FastAPI Users.